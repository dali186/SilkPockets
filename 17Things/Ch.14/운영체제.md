# HTTP

HTTP(HyperText Transfer Protocol)
- 서버와 클라이언트가 텍스트, 이미지, 동영상 등의 데이터를 주고받을 때 사용하는 프로토콜
- 텍스트 기반 데이터 - HTML/CSS, JSON/XML
- 바이너리 - 이미지/영상, 파일들 (HTTP 멀티파트, BASE64)  
- RESTful API = JSON + HTTP / SOAP = XML + HTTP
- HTTPS = HTTP + TLS(Trsanport Layer Security[전송 계층 보안])

HTTP vs TCP
- 요청 메세지를 직접 보내기 직전까지 대상 컴퓨터가 연결 가능한지, 메세지를 응답할 수 있는 상태인지 알 수 없다. -> 상태가 없는(stateless) 프로토콜 [무상태성]
- 상태가 있는 프로토콜 TCP 
- HTTP 
  - 클라이언트 요청 -> 서버 응답 -> 소켓 닫음
  - 모든 HTTP 메세지는 요청과 응답이 1:1로 대응
  - 타임아웃(Timeout, 응답없음) : 서버로부터 일정 시간 안에 HTTP 응답을 받지 못하는 경우
    - 서버가 제대로 처리했음에도 시간 때문에 클라이언트가 재시도 하는 경우가 많다
  - 고려할 점: 타임아웃 시간, 최대 재시도 횟수, 서버의 평균적 부하, 실패 확률
  - 클라이언트가 기다려야 하는 최대 시간 = 타임아웃 시간 X 재시도 횟수
- TCP
  - 먼저 소켓 연결 -> 데이터를 주고 받음 -> 소켓 닫음

- 헤더
  - 크기 HTTP > TCP (HTTP 헤더가 TCP 헤더보다 큼)
  - HTTP는 각 요청이 소켓 1개를 점유, TCP는 모든 요청이 소켓 1개를 사용 -> 요청들이 섞이게 됨(별도로 구분할 식별자 필요)

- TCP는 HTTP보다 상대적으로 빠르지만, 개발자가 연결 상태를 직접 관리해야 해서 로직이 복잡
- HTTP는 로직이 보다 간단하지만, TCP보다는 느림


패킷
[요청 메소드] [경로] [HTTP 버전] \r\n
`\r\n\r\n`은 헤더와 바디를 구분하는 구분자

요청 메서드
- 요청의 형태를 정의하는 키워드
- GET
  - 요청
  - 메세지 바디가 없음 -> ?와 &로 주소에 쿼리 파라미터를 넣을 수 있음
  - ? 첫번 째 파라미터 구분, &은 파라미터 사이를 구분
- POST
  - 데이터가 포함된 요청
- DELETE
  - 데이터 삭제
- PUT
  - 존재하는 데이터의 업데이트